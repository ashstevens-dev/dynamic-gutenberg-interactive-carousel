{"version":3,"file":"interactive-carousel/slider-component.js","mappings":"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","sources":["webpack://interactive-carousel/./src/interactive-carousel/slider-component.js"],"sourcesContent":["function waitForElement(selector) {\n  return new Promise((resolve) => {\n    const interval = setInterval(() => {\n      const element = document.querySelector(selector);\n      if (element) {\n        clearInterval(interval);\n        resolve(element);\n      }\n    }, 100);\n  });\n}\n\nclass SliderComponent extends HTMLElement {\n  constructor() {\n    super();\n    this.slider = this.querySelector('.slider');\n    this.sliderItems = this.querySelectorAll('[id^=\"Slide-\"]');\n    this.carouselCounter = this.querySelector('.interactive-carousel__counter');\n    this.currentPageElement = this.querySelector('.interactive-carousel__counter--current');\n    this.pageTotalElement = this.querySelector('.interactive-carousel__counter--total');\n    this.prevButton = this.querySelector('button[name=\"previous\"]');\n    this.nextButton = this.querySelector('button[name=\"next\"]');\n    \n    if (!this.slider || !this.nextButton) return;\n\n    this.initPages();\n    const resizeObserver = new ResizeObserver(entries => this.initPages());\n    resizeObserver.observe(this.slider);\n\n    this.slider.addEventListener('scroll', this.update.bind(this));\n    this.prevButton.addEventListener('click', this.onButtonClick.bind(this));\n    this.nextButton.addEventListener('click', this.onButtonClick.bind(this));\n    \n    document.querySelectorAll('.wp-block-interactive-carousel-interactive-carousel').forEach(el => {\n      el.addEventListener('slider-update', this.resetPages.bind(this));\n      el.addEventListener('posts-update', this.resetPages.bind(this));\n      el.addEventListener('products-update', this.resetPages.bind(this));\n    })\n  }\n\n  initPages() {\n    this.dotNav = this.querySelector('.interactive-carousel__dots-navigation');\n    this.sliderItemsToShow = Array.from(this.sliderItems).filter(element => element.clientWidth > 0);\n\n    if (this.sliderItemsToShow.length > 1) {\n      this.sliderItemOffset = this.sliderItemsToShow[1].offsetLeft - this.sliderItemsToShow[0].offsetLeft;\n      this.slidesPerPage = Math.round((this.slider.clientWidth - this.sliderItemsToShow[0].offsetLeft) / this.sliderItemOffset);\n      this.totalPages = this.sliderItemsToShow.length - this.slidesPerPage + 1;\n    } else if (this.sliderItemsToShow.length = 1) {\n      this.totalPages = 1;\n    } else return;  \n\n    if (this.dotNav) {\n      this.processDots();\n    }\n\n    this.update();\n  }\n\n  resetPages() {\n      this.slider = this.querySelector('.slider');\n      this.sliderItems = this.querySelectorAll('[id^=\"Slide-\"]');\n      this.initPages();\n  }\n\n  update() {\n    if (!this.slider || !this.nextButton) return;\n\n    const previousPage = this.currentPage;\n    if (this.slider.scrollLeft > 0 && this.sliderItemOffset > 0) {\n      this.currentPage = Math.round(this.slider.scrollLeft / this.sliderItemOffset) + 1;\n    } else {\n      this.currentPage = 1;\n    }\n    if (this.dotNav && this.dotNav.children.length > 0) {\n      this.dotButtons = this.dotNav.querySelectorAll('button');\n    }\n    \n    if (this.currentPageElement && this.pageTotalElement) {\n      this.currentPageElement.textContent = this.currentPage.toString();\n      this.pageTotalElement.textContent = this.totalPages;\n    }\n\n    if (this.currentPage != previousPage) {\n      this.dispatchEvent(new CustomEvent('slideChanged', { detail: {\n        currentPage: this.currentPage,\n        currentElement: this.sliderItemsToShow[this.currentPage - 1]\n      }}));\n    }\n    if (this.isSlideVisible(this.sliderItemsToShow[0]) && this.slider.scrollLeft === 0) {\n      this.prevButton.setAttribute('disabled', 'disabled');\n    } else {\n      this.prevButton.removeAttribute('disabled');\n    }\n\n    if (this.isSlideVisible(this.sliderItemsToShow[this.sliderItemsToShow.length - 1])) {\n      this.nextButton.setAttribute('disabled', 'disabled');\n    } else {\n      this.nextButton.removeAttribute('disabled');\n    }  \n\n    if (this.dotButtons) {\n      this.dotNav.addEventListener('click', this.onButtonClick.bind(this));\n\n      this.dotButtons.forEach((item, index) => {\n        item.classList.remove('dot-current');\n        \n        if ((index+1) == this.currentPage) {\n          item.classList.add('dot-current');\n        }\n      });\n    }\n  }\n\n  processDots() {\n    const fragment = document.createDocumentFragment();\n\n    for (let i = 0; i < this.pageTotalElement.textContent; i++) {\n      let dotBtn = document.createElement('button');\n      let dotBtnSpan = document.createElement('span');\n\n      dotBtn.classList.add('dot-nav-item');\n      dotBtn.setAttribute('name', 'dot');\n      dotBtn.setAttribute('data-step', i);\n\n      dotBtnSpan.innerHTML = `Go to Slide ${i+1}`;\n      dotBtnSpan.classList.add('visually-hidden');\n      dotBtn.append(dotBtnSpan);\n\n      fragment.appendChild(dotBtn);\n    }\n\n    this.dotNav.replaceChildren(fragment);\n\n    this.update();\n  }\n\n  isSlideVisible(element, offset = 0) {\n    const lastVisibleSlide = this.slider.clientWidth + this.slider.scrollLeft - offset;\n    return (element.offsetLeft + element.clientWidth) <= lastVisibleSlide && element.offsetLeft >= this.slider.scrollLeft;\n  }\n\n  onButtonClick(event) {\n    event.preventDefault();\n    let step = event.currentTarget.dataset.step || 1;\n    this.slideScrollPosition = event.currentTarget.name === 'next' ? this.slider.scrollLeft + (step * this.sliderItemOffset) : this.slider.scrollLeft - (step * this.sliderItemOffset);\n\n    // note that the slides need to be the same width for this functionality\n    if (event.target.name === 'dot') {\n      step = event.target.dataset.step;\n      this.slideScrollPosition = step * this.sliderItemOffset;\n    }\n\n    this.slider.scrollTo({\n      left: this.slideScrollPosition\n    });\n  }\n}\n\nwaitForElement('.slider__slide').then((element) => {\n  customElements.define('slider-component', SliderComponent);\n});"],"names":["waitForElement","selector","Promise","resolve","interval","setInterval","element","document","querySelector","clearInterval","SliderComponent","HTMLElement","constructor","slider","sliderItems","querySelectorAll","carouselCounter","currentPageElement","pageTotalElement","prevButton","nextButton","initPages","resizeObserver","ResizeObserver","entries","observe","addEventListener","update","bind","onButtonClick","forEach","el","resetPages","dotNav","sliderItemsToShow","Array","from","filter","clientWidth","length","sliderItemOffset","offsetLeft","slidesPerPage","Math","round","totalPages","processDots","previousPage","currentPage","scrollLeft","children","dotButtons","textContent","toString","dispatchEvent","CustomEvent","detail","currentElement","isSlideVisible","setAttribute","removeAttribute","item","index","classList","remove","add","fragment","createDocumentFragment","i","dotBtn","createElement","dotBtnSpan","innerHTML","append","appendChild","replaceChildren","offset","lastVisibleSlide","event","preventDefault","step","currentTarget","dataset","slideScrollPosition","name","target","scrollTo","left","then","customElements","define"],"sourceRoot":""}